<html>
<body>
<div style="margin: 0 auto; width: 100%;background: black">
    <img id="img" style="width: 100%;position: absolute;z-index: -1" src="">
    <canvas id="canvas"></canvas>
</div>

</body>
</html>
<style>
    .c {
        color: red;
    }
</style>
<script src="js/jquery-3.1.1.min.js"></script>
<script>
    function getRandNum(min, max)
    {
        return Math.floor(Math.random() * (max - min + 1) + min)
    }

    function log(x)
    {
        console.log(x);
    }

    !function(){
        var Vi = -Math.PI/1.5,h = 50;

        function trace(o){
            var r = [];
            function x(v){
               return [v[0]*h + v[2]*Math.cos(Vi)*h*0.9,
                       v[1]*h + v[2]*Math.sin(Vi)*h*0.9]
            }

            if(typeof o[0] === 'object'){
                $(o).each(function(i,v){
                    var t = x(v);
                    r[i][0] = t[0];
                    r[i][1] = t[1];
                });
            }else {
                var t = x(o);
                r[0] = t[0];
                r[1] = t[1];
            }
            return r;
        }

        function drawLines(o){
            $(o).each(function(i,v){
                var t = trace(v);
                if(i==0){
                   ctx.moveTo(t[0], t[1])
               }else {
                   ctx.lineTo(t[0], t[1])
               }
                ctx.stroke();
            });
        }

        function drawLine2(o){
            $(o).each(function(i,v){
                var t = trace(v[0]),t2 = trace(v[1]);
                ctx.moveTo(t[0], t[1]);
                ctx.lineTo(t2[0], t2[1]);
                ctx.stroke();
            });
        }
        var draw1 = [
                [1,1,1],
                [0,1,1],
                [0,0,1],
                [1,0,1],
                [1,1,1]
        ],draw2 =[
            [1,1,0],
            [0,1,0],
            [0,0,0],
            [1,0,0],
            [1,1,0]
        ],lines = [
                [[0,0,0],[0,0,1]],
                [[0,1,0],[0,1,1]],
                [[1,0,0],[1,0,1]],
                [[1,1,0],[1,1,1]]
        ];
        var obj = $('#img');
        var height, width, eleArr, middle;
        height  = obj.height();
        width   = obj.width();
        canvas        = document.getElementById('canvas');
        canvas.width  = width;
        canvas.height = height;
        ctx           = canvas.getContext('2d');
        ctx.strokeStyle = 'rgba(255,0,0,0.5)';
        drawLines(draw1);
        drawLines(draw2);
        drawLine2(lines);

    }();

//    !function ()
//    {
//        var obj = $('#img');
//        var height, width, eleArr, middle;
//        height  = obj.height();
//        width   = obj.width();
//        middle  = [width / 2, height * (1 - 0.618)];//黄金比例
//
//        canvas        = document.getElementById('canvas');
//        canvas.width  = width;
//        canvas.height = height;
//        ctx           = canvas.getContext('2d');
//        eleArr        = [];
//        for (var i = 0; i < Math.sqrt(width * height); i += 5) {
//            eleArr.push(new OriRainDrop());
//        }
//        startAni();
//        var eLength = eleArr.length;
//        var eCount  = 0;
//
//        function startAni()
//        {
//            ctx.clearRect(0, 0, width, height);
//            for (var i = 0; i <= eCount && i <= (eLength - 1); i++) {
//                eleArr[i].draw();
//            }
//            requestAnimationFrame(startAni);
//            if (eCount < eLength) {
//                eCount++;
//            }
//        }
//
//        function OriRainDrop()
//        {
//            var t = this;
//
//            function MathR(x)
//            {
//                return x + Math.random() * (1 - x);
//            }
//
//            function snowParam()
//            {
//
//            }
//
//            function init()
//            {
//                t.x   = Math.random() * width * 1.2;
//                t.y   = Math.random() * height * 1.2;
//                t.f_x = t.x + (middle[0] - t.x) * (0.1 + Math.random() * 0.4);
//                t.f_y = t.y + (middle[1] - t.y) * (0.1 + Math.random() * 0.4);
//                t.r   = 3 + Math.random() * 5; //半径
//                t.color    =  //t.x <= width / 2 ? [getRandNum(150, 255), 0, 0] :
//                        getRandNum(200, 255);
//                t.color    = [t.color, t.color, t.color];
//                t.alpha    = MathR(0.6);
//                t.life     = 50 + parseInt(Math.random() * 100);
//                t.xCal     = (t.f_x - t.x) / t.life;
//                t.yCal     = (t.f_y - t.y) / t.life;
//                t.rCal     = t.r / (t.life * 5);
//                t.alphaCal = 1.1 * t.alpha / t.life
//            }
//
//            this.draw = function ()
//            {
//                if (typeof t.life == 'undefined' || t.life <= 0) {
//                    init();
//                } else {
//                    t.life--;
//                    t.x += t.xCal;
//                    t.y += t.yCal;
//                    t.r = t.r / (1 + t.rCal);
//                    t.alpha -= t.alphaCal;
//                }
//                ctx.beginPath();
//
//
//                var grd = ctx.createRadialGradient(t.x, t.y, t.r / 10, t.x, t.y, t.r);
//                grd.addColorStop(0, "rgba(148,255,255," + t.alpha + ")");
//                grd.addColorStop(0.7, "rgba(" + t.color[0] + "," + t.color[0] + "," + t.color[0] + "," + t.alpha + ")");
//                grd.addColorStop(1, "rgba(255,255,255,0)");
//                ctx.fillStyle = grd;
//                ctx.fillRect(t.x - t.r, t.y - t.r, t.r * 2, t.r * 2);
//
////                ctx.arc(t.x, t.y, t.r, 0, 2 * Math.PI, false);
////                ctx.fillStyle = 'rgba(' + t.color[0] + ',' + t.color[1] + ',' + t.color[2] + ',' + t.alpha + ')';
//                ctx.fill();
//            }
//        }
//
//    }();


</script>